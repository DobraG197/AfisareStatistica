<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Rezultate Turneu</title>
  <style>
    body { font-family: Arial; margin: 20px; background: #f5f5f5; }
    h2 { color: #333; }
    .group, .match, .quarterfinal, .stat { background: white; padding: 10px; margin-bottom: 10px; border-radius: 8px; }
    .match input { width: 40px; margin: 0 5px; }
  </style>
</head>
<body>

  <h1>Rezultate Turneu Fotbal</h1>

  <div id="grupe"></div>
  <div id="meciuri"></div>
  <div id="sferturi"></div>
  <div id="statistici"></div>

  <script>
    // Helper: safe parse
    const parseJSON = (key) => {
      try {
        return JSON.parse(localStorage.getItem(key));
      } catch (e) {
        return null;
      }
    };

    // Grupa A, B, etc.
    const grupe = parseJSON("grupe_turneu");
    const inputValues = parseJSON("inputValues");
    const sferturiTurneu = parseJSON("sferturi_turneu");
    const meciuriGrupe = localStorage.getItem("meciuriGrupe");
    const sferturi = localStorage.getItem("sferturi");

    // Afișează Grupele
    const grupeDiv = document.getElementById("grupe");
    if (grupe) {
      grupeDiv.innerHTML = "<h2>Grupe</h2>";
      for (let grupa in grupe) {
        const echipe = grupe[grupa].join(", ");
        grupeDiv.innerHTML += `<div class="group"><strong>${grupa}:</strong> ${echipe}</div>`;
      }
    }

    // Afișează Meciurile + Scoruri
    const meciuriDiv = document.getElementById("meciuri");
    if (meciuriGrupe) {
      const parser = new DOMParser();
      const doc = parser.parseFromString(meciuriGrupe, 'text/html');
      const meciuri = doc.body.children;

      meciuriDiv.innerHTML = "<h2>Meciuri Grupe</h2>";
      Array.from(meciuri).forEach((meci, index) => {
        // Idurile inputurilor din localStorage
        const inputs = meci.querySelectorAll('input');
        inputs.forEach(input => {
          if (inputValues && inputValues[input.id] !== undefined) {
            input.value = inputValues[input.id];
          }
        });
        meciuriDiv.appendChild(meci);
      });
    }

    // Afișează Sferturile
    const sferturiDiv = document.getElementById("sferturi");
    if (sferturi) {
      const parser = new DOMParser();
      const doc = parser.parseFromString(sferturi, 'text/html');
      const sferturiElems = doc.body.children;

      sferturiDiv.innerHTML = "<h2>Sferturi de Finală</h2>";
      Array.from(sferturiElems).forEach(sfert => {
        sferturiDiv.appendChild(sfert);
      });
    }

    // Statistici Turneu (din inputValues)
    const statisticiDiv = document.getElementById("statistici");
    if (inputValues) {
      statisticiDiv.innerHTML = "<h2>Statistici Turneu</h2>";
      let totalGoluri = 0;
      let totalMeciuri = 0;

      Object.keys(inputValues).forEach(key => {
        totalGoluri += inputValues[key];
      });

      totalMeciuri = [...new Set(Object.keys(inputValues).map(key => key.match(/goluri-(\d+)/)?.[1]))].length;

      statisticiDiv.innerHTML += `
        <div class="stat"><strong>Total meciuri:</strong> ${totalMeciuri}</div>
        <div class="stat"><strong>Total goluri:</strong> ${totalGoluri}</div>
        <div class="stat"><strong>Media goluri pe meci:</strong> ${(totalGoluri / totalMeciuri).toFixed(2)}</div>
      `;
    }
  </script>
</body>
</html>
